"use strict";var zt=Object.create;var we=Object.defineProperty;var jt=Object.getOwnPropertyDescriptor;var Bt=Object.getOwnPropertyNames;var Gt=Object.getPrototypeOf,Kt=Object.prototype.hasOwnProperty;var Ht=(e,r)=>{for(var t in r)we(e,t,{get:r[t],enumerable:!0})},rt=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of Bt(r))!Kt.call(e,a)&&a!==t&&we(e,a,{get:()=>r[a],enumerable:!(n=jt(r,a))||n.enumerable});return e};var ce=(e,r,t)=>(t=e!=null?zt(Gt(e)):{},rt(r||!e||!e.__esModule?we(t,"default",{value:e,enumerable:!0}):t,e)),Zt=e=>rt(we({},"__esModule",{value:!0}),e);var Pr={};Ht(Pr,{default:()=>Wt});module.exports=Zt(Pr);var Vt=require("@raycast/api");var j=require("react"),f=require("@raycast/api");var m=require("@raycast/api"),Ze=require("node:child_process"),yt=require("child_process"),Je=require("fs");var p=ce(require("react")),b=require("@raycast/api");var nt=Object.prototype.hasOwnProperty;function ke(e,r){var t,n;if(e===r)return!0;if(e&&r&&(t=e.constructor)===r.constructor){if(t===Date)return e.getTime()===r.getTime();if(t===RegExp)return e.toString()===r.toString();if(t===Array){if((n=e.length)===r.length)for(;n--&&ke(e[n],r[n]););return n===-1}if(!t||typeof e=="object"){n=0;for(t in e)if(nt.call(e,t)&&++n&&!nt.call(r,t)||!(t in r)||!ke(e[t],r[t]))return!1;return Object.keys(r).length===n}}return e!==e&&r!==r}var te=ce(require("node:fs")),ve=ce(require("node:path")),ft=ce(require("node:crypto")),dt=ce(require("node:child_process")),ht=require("node:buffer"),ue=ce(require("node:stream")),pt=require("node:util");var mt=require("react/jsx-runtime");var Ne=globalThis;function Jt(e){let r=(0,p.useRef)(e),t=(0,p.useRef)(0);return ke(e,r.current)||(r.current=e,t.current+=1),(0,p.useMemo)(()=>r.current,[t.current])}function R(e){let r=(0,p.useRef)(e);return r.current=e,r}function Yt(e,r){let t=e instanceof Error?e.message:String(e);return(0,b.showToast)({style:b.Toast.Style.Failure,title:r?.title??"Something went wrong",message:r?.message??t,primaryAction:r?.primaryAction??at(e),secondaryAction:r?.primaryAction?at(e):void 0})}var at=e=>{let r=!0,t="[Extension Name]...",n="";try{let s=JSON.parse((0,te.readFileSync)((0,ve.join)(b.environment.assetsPath,"..","package.json"),"utf8"));t=`[${s.title}]...`,n=`https://raycast.com/${s.owner||s.author}/${s.name}`,(!s.owner||s.access==="public")&&(r=!1)}catch{}let a=b.environment.isDevelopment||r,o=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:a?"Copy Logs":"Report Error",onAction(s){s.hide(),a?b.Clipboard.copy(o):(0,b.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(t)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${o}
\`\`\`
`)}`)}}};function qt(e,r,t){let n=(0,p.useRef)(0),[a,o]=(0,p.useState)({isLoading:!0}),s=R(e),c=R(t?.abortable),i=R(r||[]),l=R(t?.onError),u=R(t?.onData),g=R(t?.onWillExecute),h=R(t?.failureToastOptions),N=R(a.data),$=(0,p.useRef)(null),d=(0,p.useRef)({page:0}),k=(0,p.useRef)(!1),D=(0,p.useRef)(!0),oe=(0,p.useRef)(50),v=(0,p.useCallback)(()=>(c.current&&(c.current.current?.abort(),c.current.current=new AbortController),++n.current),[c]),w=(0,p.useCallback)((...z)=>{let C=v();g.current?.(z),o(y=>({...y,isLoading:!0}));let q=Qt(s.current)(...z);function Q(y){return y.name=="AbortError"||C===n.current&&(l.current?l.current(y):b.environment.launchType!==b.LaunchType.Background&&Yt(y,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(K){K.hide(),$.current?.(...i.current||[])}},...h.current}),o({error:y,isLoading:!1})),y}return typeof q=="function"?(k.current=!0,q(d.current).then(({data:y,hasMore:K,cursor:Me})=>(C===n.current&&(d.current&&(d.current.cursor=Me,d.current.lastItem=y?.[y.length-1]),u.current&&u.current(y,d.current),K&&(oe.current=y.length),D.current=K,o(Fe=>d.current.page===0?{data:y,isLoading:!1}:{data:(Fe.data||[])?.concat(y),isLoading:!1})),y),y=>(D.current=!1,Q(y)))):(k.current=!1,q.then(y=>(C===n.current&&(u.current&&u.current(y),o({data:y,isLoading:!1})),y),Q))},[u,l,i,s,o,$,g,d,h,v]);$.current=w;let V=(0,p.useCallback)(()=>{d.current={page:0};let z=i.current||[];return w(...z)},[w,i]),G=(0,p.useCallback)(async(z,C)=>{let q;try{if(C?.optimisticUpdate){v(),typeof C?.rollbackOnError!="function"&&C?.rollbackOnError!==!1&&(q=structuredClone(N.current?.value));let Q=C.optimisticUpdate;o(y=>({...y,data:Q(y.data)}))}return await z}catch(Q){if(typeof C?.rollbackOnError=="function"){let y=C.rollbackOnError;o(K=>({...K,data:y(K.data)}))}else C?.optimisticUpdate&&C?.rollbackOnError!==!1&&o(y=>({...y,data:q}));throw Q}finally{C?.shouldRevalidateAfter!==!1&&(b.environment.launchType===b.LaunchType.Background||b.environment.commandMode==="menu-bar"?await V():V())}},[V,N,o,v]),ie=(0,p.useCallback)(()=>{d.current.page+=1;let z=i.current||[];w(...z)},[d,i,w]);(0,p.useEffect)(()=>{d.current={page:0},t?.execute!==!1?w(...r||[]):v()},[Jt([r,t?.execute,w]),c,d]),(0,p.useEffect)(()=>()=>{v()},[v]);let Y=t?.execute!==!1?a.isLoading:!1,ye={...a,isLoading:Y},De=k.current?{pageSize:oe.current,hasMore:D.current,onLoadMore:ie}:void 0;return{...ye,revalidate:V,mutate:G,pagination:De}}function Qt(e){return e===Promise.all||e===Promise.race||e===Promise.resolve||e===Promise.reject?e.bind(Promise):e}function st(e){return typeof e!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))!==null}function Xt(e){return e instanceof URLSearchParams?e.toString():e}function gt(e,r=[]){function t(n){return"update"in e?e.update(n,"utf8"):e.write(n)}return{dispatch:function(n){n=Xt(n),n===null?this._null():this["_"+typeof n](n)},_object:function(n){let a=/\[object (.*)\]/i,o=Object.prototype.toString.call(n),s=a.exec(o)?.[1]??"unknown:["+o+"]";s=s.toLowerCase();let c=null;if((c=r.indexOf(n))>=0){this.dispatch("[CIRCULAR:"+c+"]");return}else r.push(n);if(Buffer.isBuffer(n))return t("buffer:"),t(n.toString("utf8"));if(s!=="object"&&s!=="function"&&s!=="asyncfunction")if(this["_"+s])this["_"+s](n);else throw new Error('Unknown object type "'+s+'"');else{let i=Object.keys(n);i=i.sort(),st(n)||i.splice(0,0,"prototype","__proto__","constructor"),t("object:"+i.length+":");let l=this;return i.forEach(function(u){l.dispatch(u),t(":"),l.dispatch(n[u]),t(",")})}},_array:function(n,a){a=typeof a<"u"?a:!1;let o=this;if(t("array:"+n.length+":"),!a||n.length<=1){n.forEach(function(i){o.dispatch(i)});return}let s=[],c=n.map(function(i){let l=er(),u=r.slice();return gt(l,u).dispatch(i),s=s.concat(u.slice(r.length)),l.read().toString()});r=r.concat(s),c.sort(),this._array(c,!1)},_date:function(n){t("date:"+n.toJSON())},_symbol:function(n){t("symbol:"+n.toString())},_error:function(n){t("error:"+n.toString())},_boolean:function(n){t("bool:"+n.toString())},_string:function(n){t("string:"+n.length+":"),t(n.toString())},_function:function(n){t("fn:"),st(n)?this.dispatch("[native]"):this.dispatch(n.toString()),this.dispatch("function-name:"+String(n.name)),this._object(n)},_number:function(n){t("number:"+n.toString())},_xml:function(n){t("xml:"+n.toString())},_null:function(){t("Null")},_undefined:function(){t("Undefined")},_regexp:function(n){t("regex:"+n.toString())},_uint8array:function(n){t("uint8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint8clampedarray:function(n){t("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(n))},_int8array:function(n){t("int8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint16array:function(n){t("uint16array:"),this.dispatch(Array.prototype.slice.call(n))},_int16array:function(n){t("int16array:"),this.dispatch(Array.prototype.slice.call(n))},_uint32array:function(n){t("uint32array:"),this.dispatch(Array.prototype.slice.call(n))},_int32array:function(n){t("int32array:"),this.dispatch(Array.prototype.slice.call(n))},_float32array:function(n){t("float32array:"),this.dispatch(Array.prototype.slice.call(n))},_float64array:function(n){t("float64array:"),this.dispatch(Array.prototype.slice.call(n))},_arraybuffer:function(n){t("arraybuffer:"),this.dispatch(new Uint8Array(n))},_url:function(n){t("url:"+n.toString())},_map:function(n){t("map:");let a=Array.from(n);this._array(a,!0)},_set:function(n){t("set:");let a=Array.from(n);this._array(a,!0)},_file:function(n){t("file:"),this.dispatch([n.name,n.size,n.type,n.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){t("domwindow")},_bigint:function(n){t("bigint:"+n.toString())},_process:function(){t("process")},_timer:function(){t("timer")},_pipe:function(){t("pipe")},_tcp:function(){t("tcp")},_udp:function(){t("udp")},_tty:function(){t("tty")},_statwatcher:function(){t("statwatcher")},_securecontext:function(){t("securecontext")},_connection:function(){t("connection")},_zlib:function(){t("zlib")},_context:function(){t("context")},_nodescript:function(){t("nodescript")},_httpparser:function(){t("httpparser")},_dataview:function(){t("dataview")},_signal:function(){t("signal")},_fsevent:function(){t("fsevent")},_tlswrap:function(){t("tlswrap")}}}function er(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}function tr(e,r){let t=this[e];return t instanceof Date?`__raycast_cached_date__${t.toString()}`:Buffer.isBuffer(t)?`__raycast_cached_buffer__${t.toString("base64")}`:r}function rr(e,r){return typeof r=="string"&&r.startsWith("__raycast_cached_date__")?new Date(r.replace("__raycast_cached_date__","")):typeof r=="string"&&r.startsWith("__raycast_cached_buffer__")?Buffer.from(r.replace("__raycast_cached_buffer__",""),"base64"):r}function ot(e){let r=ft.default.createHash("sha1");return gt(r).dispatch(e),r.digest("hex")}var nr=Symbol("cache without namespace"),it=new Map;function Ke(e,r,t){let n=t?.cacheNamespace||nr,a=it.get(n)||it.set(n,new b.Cache({namespace:t?.cacheNamespace})).get(n);if(!a)throw new Error("Missing cache");let o=R(e),s=R(r),c=(0,p.useSyncExternalStore)(a.subscribe,()=>{try{return a.get(o.current)}catch(g){console.error("Could not get Cache data:",g);return}}),i=(0,p.useMemo)(()=>{if(typeof c<"u"){if(c==="undefined")return;try{return JSON.parse(c,rr)}catch(g){return console.warn("The cached data is corrupted",g),s.current}}else return s.current},[c,s]),l=R(i),u=(0,p.useCallback)(g=>{let h=typeof g=="function"?g(l.current):g;if(typeof h>"u")a.set(o.current,"undefined");else{let N=JSON.stringify(h,tr);a.set(o.current,N)}return h},[a,o,l]);return[i,u]}var le=Symbol();function ar(e,r,t){let{initialData:n,keepPreviousData:a,internal_cacheKeySuffix:o,...s}=t||{},c=(0,p.useRef)(null),[i,l]=Ke(ot(r||[])+o,le,{cacheNamespace:ot(e)}),u=(0,p.useRef)(i!==le?i:n),g=(0,p.useRef)(void 0),{mutate:h,revalidate:N,...$}=qt(e,r||[],{...s,onData(v,w){g.current=w,s.onData&&s.onData(v,w),!(w&&w.page>0)&&(c.current="promise",u.current=v,l(v))}}),d,k=$.pagination;g.current&&g.current.page>0&&$.data?d=$.data:c.current==="promise"?d=u.current:a&&i!==le?(d=i,k&&(k.hasMore=!0,k.pageSize=i.length)):a&&i===le?d=u.current:i!==le?(d=i,k&&(k.hasMore=!0,k.pageSize=i.length)):d=n;let D=R(d),oe=(0,p.useCallback)(async(v,w)=>{let V;try{if(w?.optimisticUpdate){typeof w?.rollbackOnError!="function"&&w?.rollbackOnError!==!1&&(V=structuredClone(D.current));let G=w.optimisticUpdate(D.current);c.current="cache",u.current=G,l(G)}return await h(v,{shouldRevalidateAfter:w?.shouldRevalidateAfter})}catch(G){if(typeof w?.rollbackOnError=="function"){let ie=w.rollbackOnError(D.current);c.current="cache",u.current=ie,l(ie)}else w?.optimisticUpdate&&w?.rollbackOnError!==!1&&(c.current="cache",u.current=V,l(V));throw G}},[l,h,D,u,c]);return(0,p.useEffect)(()=>{i!==le&&(c.current="cache",u.current=i)},[i]),{data:d,isLoading:$.isLoading,error:$.error,mutate:g.current&&g.current.page>0?h:oe,pagination:k,revalidate:N}}var xe=e=>!!e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function",Ve=Symbol.for("signal-exit emitter"),ze=class{constructor(){if(this.emitted={afterExit:!1,exit:!1},this.listeners={afterExit:[],exit:[]},this.count=0,this.id=Math.random(),Ne[Ve])return Ne[Ve];Object.defineProperty(Ne,Ve,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(r,t){this.listeners[r].push(t)}removeListener(r,t){let n=this.listeners[r],a=n.indexOf(t);a!==-1&&(a===0&&n.length===1?n.length=0:n.splice(a,1))}emit(r,t,n){if(this.emitted[r])return!1;this.emitted[r]=!0;let a=!1;for(let o of this.listeners[r])a=o(t,n)===!0||a;return r==="exit"&&(a=this.emit("afterExit",t,n)||a),a}},je=class{onExit(){return()=>{}}load(){}unload(){}},Be=class{#i;#t;#e;#s;#o;#a;#n;#r;constructor(r){this.#i=process.platform==="win32"?"SIGINT":"SIGHUP",this.#t=new ze,this.#a={},this.#n=!1,this.#r=[],this.#r.push("SIGHUP","SIGINT","SIGTERM"),globalThis.process.platform!=="win32"&&this.#r.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),globalThis.process.platform==="linux"&&this.#r.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT"),this.#e=r,this.#a={};for(let t of this.#r)this.#a[t]=()=>{let n=this.#e.listeners(t),{count:a}=this.#t,o=r;if(typeof o.__signal_exit_emitter__=="object"&&typeof o.__signal_exit_emitter__.count=="number"&&(a+=o.__signal_exit_emitter__.count),n.length===a){this.unload();let s=this.#t.emit("exit",null,t),c=t==="SIGHUP"?this.#i:t;s||r.kill(r.pid,c)}};this.#o=r.reallyExit,this.#s=r.emit}onExit(r,t){if(!xe(this.#e))return()=>{};this.#n===!1&&this.load();let n=t?.alwaysLast?"afterExit":"exit";return this.#t.on(n,r),()=>{this.#t.removeListener(n,r),this.#t.listeners.exit.length===0&&this.#t.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#n){this.#n=!0,this.#t.count+=1;for(let r of this.#r)try{let t=this.#a[r];t&&this.#e.on(r,t)}catch{}this.#e.emit=(r,...t)=>this.#l(r,...t),this.#e.reallyExit=r=>this.#c(r)}}unload(){this.#n&&(this.#n=!1,this.#r.forEach(r=>{let t=this.#a[r];if(!t)throw new Error("Listener not defined for signal: "+r);try{this.#e.removeListener(r,t)}catch{}}),this.#e.emit=this.#s,this.#e.reallyExit=this.#o,this.#t.count-=1)}#c(r){return xe(this.#e)?(this.#e.exitCode=r||0,this.#t.emit("exit",this.#e.exitCode,null),this.#o.call(this.#e,this.#e.exitCode)):0}#l(r,...t){let n=this.#s;if(r==="exit"&&xe(this.#e)){typeof t[0]=="number"&&(this.#e.exitCode=t[0]);let a=n.call(this.#e,r,...t);return this.#t.emit("exit",this.#e.exitCode,null),a}else return n.call(this.#e,r,...t)}},We=null,sr=(e,r)=>(We||(We=xe(process)?new Be(process):new je),We.onExit(e,r));function or(e,{timeout:r}={}){let t=new Promise((c,i)=>{e.on("exit",(l,u)=>{c({exitCode:l,signal:u,timedOut:!1})}),e.on("error",l=>{i(l)}),e.stdin&&e.stdin.on("error",l=>{i(l)})}),n=sr(()=>{e.kill()});if(r===0||r===void 0)return t.finally(()=>n());let a,o=new Promise((c,i)=>{a=setTimeout(()=>{e.kill("SIGTERM"),i(Object.assign(new Error("Timed out"),{timedOut:!0,signal:"SIGTERM"}))},r)}),s=t.finally(()=>{clearTimeout(a)});return Promise.race([o,s]).finally(()=>n())}var Ge=class extends Error{constructor(){super("The output is too big"),this.name="MaxBufferError"}};function ir(e){let{encoding:r}=e,t=r==="buffer",n=new ue.default.PassThrough({objectMode:!1});r&&r!=="buffer"&&n.setEncoding(r);let a=0,o=[];return n.on("data",s=>{o.push(s),a+=s.length}),n.getBufferedValue=()=>t?Buffer.concat(o,a):o.join(""),n.getBufferedLength=()=>a,n}async function ct(e,r){let t=ir(r);return await new Promise((n,a)=>{let o=s=>{s&&t.getBufferedLength()<=ht.constants.MAX_LENGTH&&(s.bufferedData=t.getBufferedValue()),a(s)};(async()=>{try{await(0,pt.promisify)(ue.default.pipeline)(e,t),n()}catch(s){o(s)}})(),t.on("data",()=>{t.getBufferedLength()>8e7&&o(new Ge)})}),t.getBufferedValue()}async function lt(e,r){e.destroy();try{return await r}catch(t){return t.bufferedData}}async function cr({stdout:e,stderr:r},{encoding:t},n){let a=ct(e,{encoding:t}),o=ct(r,{encoding:t});try{return await Promise.all([n,a,o])}catch(s){return Promise.all([{error:s,exitCode:null,signal:s.signal,timedOut:s.timedOut||!1},lt(e,a),lt(r,o)])}}function lr(e){let r=typeof e=="string"?`
`:10,t=typeof e=="string"?"\r":13;return e[e.length-1]===r&&(e=e.slice(0,-1)),e[e.length-1]===t&&(e=e.slice(0,-1)),e}function ut(e,r){return e.stripFinalNewline?lr(r):r}function ur({timedOut:e,timeout:r,signal:t,exitCode:n}){return e?`timed out after ${r} milliseconds`:t!=null?`was killed with ${t}`:n!=null?`failed with exit code ${n}`:"failed"}function fr({stdout:e,stderr:r,error:t,signal:n,exitCode:a,command:o,timedOut:s,options:c,parentError:i}){let u=`Command ${ur({timedOut:s,timeout:c?.timeout,signal:n,exitCode:a})}: ${o}`,g=t?`${u}
${t.message}`:u,h=[g,r,e].filter(Boolean).join(`
`);return t?t.originalMessage=t.message:t=i,t.message=h,t.shortMessage=g,t.command=o,t.exitCode=a,t.signal=n,t.stdout=e,t.stderr=r,"bufferedData"in t&&delete t.bufferedData,t}function dr({stdout:e,stderr:r,error:t,exitCode:n,signal:a,timedOut:o,command:s,options:c,parentError:i}){if(t||n!==0||a!==null)throw fr({error:t,exitCode:n,signal:a,stdout:e,stderr:r,command:s,timedOut:o,options:c,parentError:i});return e}var hr=/ +/g;function pr(e,r){if(r)return[e,...r];let t=[];for(let n of e.trim().split(hr)){let a=t[t.length-1];a&&a.endsWith("\\")?t[t.length-1]=`${a.slice(0,-1)} ${n}`:t.push(n)}return t}function Se(e,r,t){let{parseOutput:n,input:a,onData:o,onWillExecute:s,initialData:c,execute:i,keepPreviousData:l,onError:u,failureToastOptions:g,...h}=Array.isArray(r)?t||{}:r||{},N={initialData:c,execute:i,keepPreviousData:l,onError:u,onData:o,onWillExecute:s,failureToastOptions:g},$=(0,p.useRef)(null),d=R(n||dr),k=(0,p.useCallback)(async(D,oe,v,w)=>{let[V,...G]=pr(D,oe),ie=[V,...G].join(" "),Y={stripFinalNewline:!0,...v,timeout:v?.timeout||1e4,signal:$.current?.signal,encoding:v?.encoding===null?"buffer":v?.encoding||"utf8",env:{PATH:"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin",...process.env,...v?.env}},ye=dt.default.spawn(V,G,Y),De=or(ye,Y);w&&ye.stdin.end(w);let[{error:z,exitCode:C,signal:q,timedOut:Q},y,K]=await cr(ye,Y,De),Me=ut(Y,y),Fe=ut(Y,K);return d.current({stdout:Me,stderr:Fe,error:z,exitCode:C,signal:q,timedOut:Q,command:ie,options:Y,parentError:new Error})},[d]);return ar(k,[e,Array.isArray(r)?r:[],h,a],{...N,abortable:$})}var Ee=(0,m.getPreferenceValues)(),I=class extends Error{title;constructor(r,t){t||(t=r),super(t),this.title=r}},He=class extends I{},M=class extends I{},Ae=class extends I{},H=class extends I{},P=()=>{let e=[Ee.cliPath,"/usr/local/bin/op","/opt/homebrew/bin/op"].filter(Boolean).find(r=>r?(0,Je.existsSync)(r):!1);if(!e)throw new M("1Password CLI is not found. Please set the path in the extension preferences.");return e},fe=[Ee.zshPath,"/bin/zsh"].find(e=>(0,Je.existsSync)(e)),bt=new RegExp(/\[\w+\]\s+\d{4}\/\d{2}\/\d{2}\s+\d{2}:\d{2}:\d{2}\s+(.*)$/m);function $t(e){if(e.category==="LOGIN")return e.urls?.find(r=>r.primary)?.href}function wt(e){let r=["open-in-1password","open-in-browser","copy-username","copy-password","copy-one-time-password","paste-username","paste-password","paste-one-time-password","share-item","switch-account"],t=[...new Set([Ee.primaryAction,Ee.secondaryAction,...r])];switch(e.category){case"LOGIN":return t;case"PASSWORD":return t.filter(n=>n!=="copy-username"&&n!=="paste-username");default:return["open-in-1password"]}}function kt(e){let r=P();if(r)return(0,yt.execFileSync)(r,e,{maxBuffer:4194304}).toString();throw Error("1Password CLI is not found!")}var _=e=>{throw e.includes("no such host")?new H("No connection to 1Password.","Verify Your Internet Connection."):e.includes("could not get item")||e.includes("isn't an item")?new He("Item not found on 1Password.","Check it on your 1Password app."):e.includes("ENOENT")||e.includes("file")||e.includes("enoent")?new M("1Password CLI not found."):e.includes("does not have a field")?new I(`Item does not contain the field ${e.split("does not have a field ")[1].trim()}.`):new I(e)},xt=()=>!!fe,be=e=>(0,Ze.execSync)(`${P()} signin ${e||""}`,{shell:fe}),vt=()=>{try{return(0,Ze.execSync)(`${P()} whoami`),!0}catch{return!1}},Ye=(e,r)=>Se(P(),[...e,"--format=json"],{parseOutput:({stdout:t,stderr:n,error:a,exitCode:o})=>(a&&_(a.message),n&&_(n),o!=0&&_(t),r?r(JSON.parse(t)):JSON.parse(t)),onError:async t=>{await(0,m.showToast)({style:m.Toast.Style.Failure,title:t.message})}}),St=({flags:e=[],account:r,execute:t=!0})=>Se(P(),["--account",r,"items","list","--long","--format=json",...e],{parseOutput:({stdout:n,stderr:a,error:o,exitCode:s})=>(o&&_(o.message),a&&_(a),s!=0&&_(n),JSON.parse(n).sort((i,l)=>i.favorite&&!l.favorite?-1:!i.favorite&&l.favorite?1:i.title.localeCompare(l.title))),execute:t,onError:async n=>{await(0,m.showToast)({style:m.Toast.Style.Failure,title:n.message})}});var Et=()=>Ye(["vault","list"],e=>e.sort((r,t)=>r.name.localeCompare(t.name))),At=()=>Ye(["item","template","list"],e=>e.sort((r,t)=>r.name.localeCompare(t.name))),Ce=()=>Ye(["whoami"]),Pe=(e=!0)=>Se(P(),["account","list","--format=json"],{parseOutput:({stdout:r,stderr:t,error:n,exitCode:a})=>(n&&_(n.message),t&&_(t),a!=0&&_(r),JSON.parse(r)),onError:async r=>{await(0,m.showToast)({style:m.Toast.Style.Failure,title:r.message})},execute:e});function Ie(e){switch(e){case"API_CREDENTIAL":return m.Icon.Code;case"CREDIT_CARD":return m.Icon.CreditCard;case"CRYPTO_WALLET":return m.Icon.Crypto;case"BANK_ACCOUNT":case"CUSTOM":return m.Icon.Wallet;case"DATABASE":return m.Icon.HardDrive;case"DOCUMENT":return m.Icon.Document;case"DRIVER_LICENSE":return m.Icon.Car;case"EMAIL_ACCOUNT":return m.Icon.Envelope;case"IDENTITY":return m.Icon.Person;case"LOGIN":return m.Icon.Fingerprint;case"MEDICAL_RECORD":return m.Icon.Heartbeat;case"MEMBERSHIP":return m.Icon.StarCircle;case"OUTDOOR_LICENSE":return m.Icon.Tree;case"PASSPORT":return m.Icon.Globe;case"PASSWORD":return m.Icon.Key;case"REWARD_PROGRAM":return m.Icon.Gift;case"SECURE_NOTE":return m.Icon.Lock;case"SOCIAL_SECURITY_NUMBER":return m.Icon.Shield;case"SOFTWARE_LICENSE":return m.Icon.CodeBlock;case"SERVER":case"SSH_KEY":return m.Icon.Terminal;case"WIRELESS_ROUTER":return m.Icon.Wifi;default:return m.Icon.Key}}function qe(e){return e&&e[0].toUpperCase()+e.slice(1).toLowerCase()}var U=require("@raycast/api");var de=require("@raycast/api");async function re(){let e=await(0,de.showToast)({style:de.Toast.Style.Animated,title:"Clearing cache..."});try{kt(["signout","--all"]),e.style=de.Toast.Style.Success,e.title="Cleared cache"}catch(r){e.style=de.Toast.Style.Failure,e.title="Failed to clear cache",r instanceof Error&&(e.message=r.message)}}var ne=require("react/jsx-runtime");function X(){let e=P();return(0,ne.jsx)(U.Detail,{markdown:`
${e?"":"# 1Password CLI Tool Not Configured or Installed Properly"}
${e?"":"# Zsh Shell Not Configured or Installed Properly"}

${e?"":`
-  Ensure that the 1Password CLI is installed on your system. You can download it from [official 1Password CLI website](https://developer.1password.com/docs/cli/get-started).
-  Check if the path to the 1Password CLI is correctly added to your system's environment variables.
-  Run \`op --version\` to verify that the 1Password CLI is correctly installed.
`}


${fe?"":"\n-  Make sure that Zsh is installed by running `zsh --version` in your terminal.\n-  Review your `.zshrc` file for any incorrect configurations that might be causing issues.\n-  Review your extension preferences for the Zsh shell path.\n"}

### Need More Help?
If you continue to experience problems after following these steps, please reach out by opening an issue in our [Github](https://github.com/raycast/extensions/issues/new/choose)

We're here to help ensure a smooth setup process!

---`,actions:(0,ne.jsxs)(U.ActionPanel,{children:[(0,ne.jsx)(U.Action,{icon:U.Icon.Gear,title:"Open Extension Preferences",onAction:U.openExtensionPreferences}),(0,ne.jsx)(U.Action.Open,{title:"Open 1Password Settings",target:"onepassword://settings"}),(0,ne.jsx)(U.Action,{title:"Reset Cache",icon:U.Icon.Trash,onAction:()=>re()})]})})}var E=require("@raycast/api"),Qe=require("path");var ae=require("react/jsx-runtime"),mr=(0,Qe.join)(E.environment.assetsPath,"binary-instruction.png"),gr=(0,Qe.join)(E.environment.assetsPath,"1password-settings.png"),yr=`
# You will need the following to run the extension

## \u2705 1Password CLI

### This extension utilizes the 1Password CLI tool. You can setup the tool by following their [official document](https://developer.1password.com/docs/cli/get-started/).

### In case there's an issue with the tool, check the following.
![Terminal Instruction](${mr})

## \u2705 Enable Command-Line Interface (CLI)

### To turn on the app integration and set up 1Password to authenticate with biometrics:
![1Password Settings](${gr})

1. Open [1Password](onepassword://settings).
2. Select the account or collection at the top of the sidebar and choose Preferences > Security.
3. Check [Touch ID](https://support.1password.com/touch-id-mac/).
4. Select Developer in the sidebar.
5. Check "Connect with 1Password CLI".

You can also unlock 1Password CLI with your [Apple Watch](https://support.1password.com/apple-watch-mac/).
`;function Te(){return(0,ae.jsx)(E.Detail,{markdown:yr,actions:(0,ae.jsxs)(E.ActionPanel,{children:[(0,ae.jsx)(E.Action,{icon:E.Icon.Gear,title:"Open Extension Preferences",onAction:E.openExtensionPreferences}),(0,ae.jsx)(E.Action.Open,{title:"Open 1Password Settings",target:"onepassword://settings"}),(0,ae.jsx)(E.Action,{title:"Reset Cache",icon:E.Icon.Trash,onAction:()=>re()})]})})}var O=require("react/jsx-runtime"),br=(0,j.createContext)(void 0),Ct=({children:e})=>{try{P()}catch{return(0,O.jsx)(Te,{})}let[r,t]=(0,j.useState)(vt()),[n]=(0,j.useState)(!xt()),[a,o]=(0,j.useState)(!0),[s,c]=(0,j.useState)(""),{data:i,error:l,isLoading:u}=Pe(!a),g=f.environment.raycastVersion.includes("alpha")?"raycastinternal://":"raycast://",h=async $=>{let d=await(0,f.showToast)({style:f.Toast.Style.Animated,title:"Signing in..."});try{be(`--account ${$.account}`),t(!0),o(!0),d.style=f.Toast.Style.Success,d.title="Signed in"}catch(k){d.style=f.Toast.Style.Failure,d.title="Failed to sign in",k instanceof Error&&(d.message=k.message,d.primaryAction={title:"Copy logs",onAction:async D=>{await f.Clipboard.copy(k.message),D.hide()}})}},N=async()=>{await(0,f.closeMainWindow)({popToRootType:f.PopToRootType.Suspended});let $=await(0,f.showToast)({style:f.Toast.Style.Animated,title:"Authenticating..."});try{if(!fe)throw new Ae("Zsh Binary Path Missing!");if(!P())throw new M("1Password CLI is missing! Please install it before use.");be(),t(!0),o(!0),$.style=f.Toast.Style.Success,$.title="Authenticated!";return}catch(d){if(!(d instanceof Error)){$.style=f.Toast.Style.Failure,$.title="Error Authenticating.",$.message=String(d);return}let k=d.message.match(bt);if(k&&k[1]?c(k[1]):c(d.message),d.message.includes("multiple accounts found"))return o(!1);$.style=f.Toast.Style.Failure,$.title="Error Authenticating."}finally{await(0,f.open)(g)}};return(0,j.useMemo)(async()=>{!r&&!n&&N()},[r]),a?n?(0,O.jsx)(X,{}):r?(0,O.jsx)(br.Provider,{value:{isAuthenticated:r},children:e}):(0,O.jsx)(f.List,{children:(0,O.jsx)(f.List.EmptyView,{title:"Authentication Required",description:s||"Please authenticate using the requested method to proceed.",icon:f.Icon.Key,actions:(0,O.jsx)(f.ActionPanel,{children:(0,O.jsx)(f.Action,{title:"Reload",icon:f.Icon.Repeat,onAction:()=>N()},"reload-view")})})}):(0,O.jsx)(f.Form,{isLoading:u,actions:(0,O.jsx)(f.ActionPanel,{children:(0,O.jsx)(f.Action.SubmitForm,{title:"Sign in",icon:f.Icon.Key,onSubmit:h})}),children:(0,O.jsx)(f.Form.Dropdown,{id:"account",title:"Account",autoFocus:!0,children:(i&&!l?i:[]).map($=>(0,O.jsx)(f.Form.Dropdown.Item,{title:`${$.url} - ${$.email}`,value:$.account_uuid},$.account_uuid))})})};var F=require("@raycast/api"),Le=require("react");var J=require("@raycast/api");var me=require("@raycast/api");var S=require("@raycast/api");var L=require("@raycast/api");var Ue=require("react");var he=require("@raycast/api");var pe=require("react/jsx-runtime"),$e="null";function Pt({onCategoryChange:e}){let{data:r,error:t,isLoading:n}=At();return t?(0,pe.jsx)(X,{}):(0,pe.jsxs)(he.List.Dropdown,{defaultValue:$e,isLoading:n,onChange:e,tooltip:"Select Category",storeValue:!0,children:[(0,pe.jsx)(he.List.Dropdown.Item,{icon:he.Icon.AppWindowGrid3x3,title:"All Categories",value:$e},"000"),(r||[]).map(a=>(0,pe.jsx)(he.List.Dropdown.Item,{icon:Ie(a.name.replaceAll(" ","_").toUpperCase()),title:a.name,value:a.name},a.uuid))]})}var Z=require("@raycast/api");var x=require("@raycast/api"),Xe=require("child_process");var It=require("@raycast/api"),Re=require("react");function Tt(e=!1){let[r,t]=(0,Re.useState)({});return(0,Re.useEffect)(()=>{if(!e)return;(async()=>{try{let a=await(0,It.getFrontmostApplication)();t({name:a.name,icon:a.path?{fileIcon:a.path}:void 0})}catch{t({})}})()},[e]),r}var Rt=require("react/jsx-runtime");function se({id:e,vault_id:r,shortcut:t,field:n="password",attribute:a,isPasteAction:o}){let s=P(),c=Tt(!!o);return(0,Rt.jsx)(x.Action,{icon:o?c.icon??x.Icon.Text:x.Icon.Clipboard,title:o?`Paste ${qe(n)}${c.name?` to ${c.name}`:""}`:`Copy ${qe(n)}`,shortcut:t,onAction:async()=>{let i=await(0,x.showToast)({style:x.Toast.Style.Animated,title:o?`Pasting ${n}${c.name?` to ${c.name}`:""}...`:`Copying ${n}...`});try{let l;if(a==="otp")l=(0,Xe.execFileSync)(s,["item","get",e,"--otp"]);else{let g=a?`?attribute=${a}`:"",h=`op://${r}/${e}/${n}${g}`;l=(0,Xe.execFileSync)(s,["read",h])}let u=l.toString().trim();o?(await x.Clipboard.paste(u),i.style=x.Toast.Style.Success,i.title=`Pasted ${n}${c.name?` to ${c.name}`:""}`,await(0,x.showHUD)(`Pasted ${n}${c.name?` to ${c.name}`:""}`)):(await x.Clipboard.copy(u,{concealed:!0}),i.style=x.Toast.Style.Success,i.title="Copied to clipboard",await(0,x.showHUD)(`Copied ${n} to clipboard`))}catch(l){if(i.style=x.Toast.Style.Failure,i.title=`Failed to ${o?"paste":"copy"}`,l instanceof Error||l instanceof I)try{_(l.message)}catch(u){u instanceof I?(u.title!=u.message&&(i.message=u.message),i.title=u.title,i.primaryAction={title:"Copy logs",onAction:async g=>{await x.Clipboard.copy(u.message),g.hide()}}):u instanceof Error&&(i.title=u.message,i.primaryAction={title:"Copy logs",onAction:async g=>{await x.Clipboard.copy(u.message),g.hide()}})}}}})}var A=require("@raycast/api"),_t=require("child_process");var Ot=require("react/jsx-runtime");function Ut({id:e,title:r,shortcut:t}){return(0,Ot.jsx)(A.Action,{icon:A.Icon.Link,title:"Share Item",shortcut:t,onAction:async()=>{let n=await(0,A.showToast)({style:A.Toast.Style.Animated,title:`Sharing ${r}...`});try{let a=(0,_t.execFileSync)(P(),["item","share",e]);await A.Clipboard.copy(a.toString().trim(),{concealed:!0}),n.style=A.Toast.Style.Success,n.title="Copied to clipboard",await(0,A.showHUD)("Copied sharing link to clipboard")}catch(a){if(n.style=A.Toast.Style.Failure,n.title="Failed to copy",a instanceof Error||a instanceof I)try{_(a.message)}catch(o){o instanceof I?(o.title!=o.message&&(n.message=o.message),n.title=o.title,n.primaryAction={title:"Copy logs",onAction:async s=>{await A.Clipboard.copy(o.message),s.hide()}}):o instanceof Error&&(n.title=o.message,n.primaryAction={title:"Copy logs",onAction:async s=>{await A.Clipboard.copy(o.message),s.hide()}})}}}})}var T=require("react/jsx-runtime");function Lt({account:e,item:r,actions:t}){return(0,T.jsxs)(Z.ActionPanel,{children:[t.map(n=>{switch(n){case"open-in-1password":return $r(e,r);case"open-in-browser":return wr(r);case"copy-username":return kr(r);case"copy-password":return xr(r);case"copy-one-time-password":return vr(r);case"paste-username":return Sr(r);case"paste-password":return Er(r);case"paste-one-time-password":return Ar(r);case"share-item":return Cr(r)}}),(0,T.jsxs)(Z.ActionPanel.Section,{children:[_e(),(0,T.jsx)(Z.Action,{title:"Reset Cache",icon:Z.Icon.Trash,onAction:()=>re()})]})]})}function $r(e,r){return e?(0,T.jsx)(Z.Action.Open,{title:"Open in 1Password",target:`onepassword://view-item/?a=${e.account_uuid}&v=${r.vault.id}&i=${r.id}`,application:"com.1password.1password",shortcut:{modifiers:["cmd","shift"],key:"o"}},"open-in-1password"):null}function wr(e){let r=$t(e);return r?(0,T.jsx)(Z.Action.OpenInBrowser,{title:"Open in Browser",url:r,shortcut:{modifiers:["opt"],key:"return"}},"open-in-browser"):null}function kr(e){return(0,T.jsx)(se,{id:e.id,vault_id:e.vault.id,field:"username",shortcut:{modifiers:["cmd","shift"],key:"c"}},"copy-username")}function xr(e){return(0,T.jsx)(se,{id:e.id,vault_id:e.vault.id,field:"password",shortcut:{modifiers:["cmd","opt"],key:"c"}},"copy-password")}function vr(e){return(0,T.jsx)(se,{id:e.id,vault_id:e.vault.id,field:"one-time password",attribute:"otp",shortcut:{modifiers:["cmd","ctrl"],key:"c"}},"copy-one-time-password")}function Sr(e){return(0,T.jsx)(se,{id:e.id,vault_id:e.vault.id,field:"username",shortcut:{modifiers:["cmd","shift"],key:"v"},isPasteAction:!0},"paste-username")}function Er(e){return(0,T.jsx)(se,{id:e.id,vault_id:e.vault.id,field:"password",shortcut:{modifiers:["cmd","opt"],key:"v"},isPasteAction:!0},"paste-password")}function Ar(e){return(0,T.jsx)(se,{id:e.id,vault_id:e.vault.id,field:"one-time password",attribute:"otp",shortcut:{modifiers:["cmd","ctrl"],key:"v"},isPasteAction:!0},"paste-one-time-password")}function Cr(e){return(0,T.jsx)(Ut,{id:e.id,title:e.title,shortcut:{modifiers:["cmd","shift"],key:"s"}},"share-item")}var W=require("react/jsx-runtime");function Oe({flags:e}){let[r,t]=Ke("selected_category",$e),[n,a]=(0,Ue.useState)([]),{data:o,error:s,isLoading:c}=Ce(),{data:i,error:l,isLoading:u}=St({flags:e,account:o?.account_uuid??"",execute:!s&&!c});(0,Ue.useMemo)(()=>{if(i){if(r===$e)return a(i);a(i?.filter(h=>h.category===r.replaceAll(" ","_").toUpperCase()))}},[i,r]);let g=h=>{r!==h&&t(h)};return l instanceof M||s instanceof M?(0,W.jsx)(X,{}):l instanceof H||s instanceof H?(0,W.jsx)(L.List,{children:(0,W.jsx)(L.List.EmptyView,{title:l?.title||s?.title,description:l?.message||s?.message,icon:L.Icon.WifiDisabled})}):(0,W.jsxs)(L.List,{searchBarAccessory:(0,W.jsx)(Pt,{onCategoryChange:g}),isLoading:u||c,children:[(0,W.jsx)(L.List.EmptyView,{title:"No items found",icon:"1password-noview.png",description:"Any items you have added in 1Password app will be listed here."}),(0,W.jsx)(L.List.Section,{title:"Items",subtitle:`${n?.length}`,children:n?.length?n.map(h=>(0,W.jsx)(L.List.Item,{id:h.id,icon:{value:{source:Ie(h.category),tintColor:L.Color.Blue},tooltip:h.category},title:h.title,subtitle:h.additional_information,accessories:[h?.favorite?{icon:{source:L.Icon.Stars,tintColor:L.Color.Yellow},tooltip:"Favorite item"}:{},{text:h.vault?.name}],keywords:h.additional_information?[h.additional_information]:[],actions:(0,W.jsx)(Lt,{account:o,item:h,actions:wt(h)})},h.id)):null})]})}var Dt=require("react"),ee=require("react/jsx-runtime");function Mt({reset:e=!1}){let[r,t]=(0,Dt.useState)(!1),{data:n,error:a,isLoading:o}=Pe();return a?(0,ee.jsx)(Te,{}):!e||r?(0,ee.jsx)(Oe,{}):(0,ee.jsx)(S.Form,{isLoading:o,actions:(0,ee.jsx)(S.ActionPanel,{children:(0,ee.jsx)(S.Action.SubmitForm,{title:"Sign in",icon:S.Icon.Key,onSubmit:async s=>{let c=await(0,S.showToast)({style:S.Toast.Style.Animated,title:"Signing in..."});try{be(`--account ${s.account}`),t(!0),c.style=S.Toast.Style.Success,c.title="Signed in"}catch(i){c.style=S.Toast.Style.Failure,c.title="Failed to sign in",i instanceof Error&&(c.message=i.message,c.primaryAction={title:"Copy logs",onAction:async l=>{await S.Clipboard.copy(i.message),l.hide()}})}}})}),children:(0,ee.jsx)(S.Form.Dropdown,{id:"account",title:"Account",autoFocus:!0,children:(n||[]).map(s=>(0,ee.jsx)(S.Form.Dropdown.Item,{title:`${s.url} - ${s.email}`,value:s.account_uuid},s.account_uuid))})})}var et=require("react/jsx-runtime");function _e(){let{push:e}=(0,me.useNavigation)();return(0,et.jsx)(me.Action,{title:"Switch Account",icon:me.Icon.Switch,onAction:()=>e((0,et.jsx)(Mt,{reset:!0}))},"switch-account")}var ge=require("react/jsx-runtime");function Ft({vault:e}){let{push:r}=(0,J.useNavigation)();return(0,ge.jsx)(J.ActionPanel,{children:(0,ge.jsxs)(J.ActionPanel.Section,{children:[(0,ge.jsx)(J.Action,{title:"Enter Vault",icon:J.Icon.Folder,onAction:()=>r((0,ge.jsx)(Oe,{flags:[`--vault=${e.id}`]}))}),_e()]})})}var B=require("react/jsx-runtime");function Nt(){let[e,r]=(0,Le.useState)([]),{data:t,error:n,isLoading:a}=Ce(),{data:o,error:s,isLoading:c}=Et();return(0,Le.useMemo)(()=>{o&&r(o)},[o]),s instanceof M||n instanceof M?(0,B.jsx)(X,{}):s instanceof H||n instanceof H?(0,B.jsx)(F.List,{children:(0,B.jsx)(F.List.EmptyView,{title:s?.title||n?.title,description:s?.message||n?.message,icon:F.Icon.WifiDisabled})}):(0,B.jsxs)(F.List,{isLoading:c||a,children:[(0,B.jsx)(F.List.EmptyView,{title:"No items found",icon:"1password-noview.png",description:"Any vaults you have added in 1Password app will be listed here."}),(0,B.jsx)(F.List.Section,{title:"Vaults",subtitle:`${e?.length}`,children:e?.length&&e.map(i=>(0,B.jsx)(F.List.Item,{id:i.id,icon:{value:{source:F.Icon.Folder,tintColor:F.Color.Blue},tooltip:"Vault"},title:i.name,actions:(0,B.jsx)(Ft,{account:t,vault:i})},i.id))})]})}var tt=require("react/jsx-runtime");function Wt(){return(0,Vt.getPreferenceValues)().version==="v8"?(0,tt.jsx)(Ct,{children:(0,tt.jsx)(Nt,{})}):null}
